jQuery(function(){jQuery.ajaxSetup({cache:!1})});if($.fn.pagination)$.fn.pagination.defaults.beforePageText="\u7b2c",$.fn.pagination.defaults.afterPageText="\u5171 {pages} \u9875",$.fn.pagination.defaults.displayMsg="\u663e\u793a {from} \u5230 {to},\u5171 {total} \u8bb0\u5f55";if($.fn.datagrid)$.fn.datagrid.defaults.loadMsg="\u6b63\u5728\u5904\u7406\uff0c\u8bf7\u7a0d\u5f85\u3002\u3002\u3002";if($.fn.treegrid&&$.fn.datagrid)$.fn.treegrid.defaults.loadMsg=$.fn.datagrid.defaults.loadMsg;
if($.messager)$.messager.defaults.ok="\u786e\u5b9a",$.messager.defaults.cancel="\u53d6\u6d88";$.map("validatebox,textbox,passwordbox,filebox,searchbox,combo,combobox,combogrid,combotree,datebox,datetimebox,numberbox,spinner,numberspinner,timespinner,datetimespinner".split(","),function(b){if($.fn[b])$.fn[b].defaults.missingMessage="\u8be5\u8f93\u5165\u9879\u4e3a\u5fc5\u8f93\u9879"});
if($.fn.validatebox)$.fn.validatebox.defaults.rules.email.message="\u8bf7\u8f93\u5165\u6709\u6548\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740",$.fn.validatebox.defaults.rules.url.message="\u8bf7\u8f93\u5165\u6709\u6548\u7684URL\u5730\u5740",$.fn.validatebox.defaults.rules.length.message="\u8f93\u5165\u5185\u5bb9\u957f\u5ea6\u5fc5\u987b\u4ecb\u4e8e{0}\u548c{1}\u4e4b\u95f4",$.fn.validatebox.defaults.rules.remote.message="\u8bf7\u4fee\u6b63\u8be5\u5b57\u6bb5";
if($.fn.calendar)$.fn.calendar.defaults.weeks="\u65e5,\u4e00,\u4e8c,\u4e09,\u56db,\u4e94,\u516d".split(","),$.fn.calendar.defaults.months="\u4e00\u6708,\u4e8c\u6708,\u4e09\u6708,\u56db\u6708,\u4e94\u6708,\u516d\u6708,\u4e03\u6708,\u516b\u6708,\u4e5d\u6708,\u5341\u6708,\u5341\u4e00\u6708,\u5341\u4e8c\u6708".split(",");
if($.fn.datebox)$.fn.datebox.defaults.currentText="\u4eca\u5929",$.fn.datebox.defaults.closeText="\u5173\u95ed",$.fn.datebox.defaults.okText="\u786e\u5b9a",$.fn.datebox.defaults.formatter=function(b){var a=b.getFullYear(),c=b.getMonth()+1,b=b.getDate();return a+"-"+(10>c?"0"+c:c)+"-"+(10>b?"0"+b:b)},$.fn.datebox.defaults.parser=function(b){if(!b)return new Date;var a=b.split("-"),b=parseInt(a[0],10),c=parseInt(a[1],10),a=parseInt(a[2],10);return!isNaN(b)&&!isNaN(c)&&!isNaN(a)?new Date(b,c-1,a):new Date};
$.fn.datetimebox&&$.fn.datebox&&$.extend($.fn.datetimebox.defaults,{currentText:$.fn.datebox.defaults.currentText,closeText:$.fn.datebox.defaults.closeText,okText:$.fn.datebox.defaults.okText});if($.fn.datetimespinner)$.fn.datetimespinner.defaults.selections=[[0,4],[5,7],[8,10],[11,13],[14,16],[17,19]];$.extend($.fn.tabs.defaults,{tabHeight:36});$.extend($.fn.textbox.defaults,{height:32});$.extend($.fn.passwordbox.defaults,{height:32});$.extend($.fn.combo.defaults,{height:32});
$.extend($.fn.combobox.defaults,{height:32});$.extend($.fn.combogrid.defaults,{height:32});$.extend($.fn.combotree.defaults,{height:32});$.extend($.fn.combotreegrid.defaults,{height:32});$.extend($.messager.defaults,{width:320});$.extend($.fn.datebox.defaults,{height:32,panelWidth:220});$.extend($.fn.datetimebox.defaults,{height:32,panelWidth:220});$.extend($.fn.datetimespinner.defaults,{height:32});$.extend($.fn.numberbox.defaults,{height:32});$.extend($.fn.spinner.defaults,{height:32});
$.extend($.fn.numberspinner.defaults,{height:32});$.extend($.fn.searchbox.defaults,{height:32});$.extend($.fn.filebox.defaults,{height:32});$.extend($.fn.validatebox.defaults,{height:32});$.extend($.fn.validatebox.defaults.tipOptions,{onShow:function(){$(this).tooltip("tip").css({color:"#fff",border:"none",backgroundColor:"#ff7e00"})}});
(function(b){b.insdep={ajax:function(a){a=b.extend(!0,{url:"",async:!1,cache:!1,type:"POST",dataType:"html",beforeSend:function(){b.messager.progress()},complete:function(){b.messager.progress("close")}},a);b.ajax(a)},error:function(a){b("<div/>").window({id:"insdep-error-debug-window",cache:!1,width:720,height:480,modal:!0,title:"\u9519\u8bef",content:"<div style='padding:15px;overflow:hidden;height:auto;clear:both;'><b>Return Error</b><br/>"+a+"<br/></div>",border:!1,collapsible:!1,minimizable:!1,
maximizable:!1,queryParams:"",onClose:function(){b(this).window("destroy")},buttons:[]})},window:function(a){a=b.extend(!0,{id:"temp-window",href:"",cache:!1,method:"post",width:680,height:550,modal:!0,title:"",border:!1,collapsible:!1,minimizable:!1,maximizable:!1,queryParams:"",onClose:function(){b(this).window("destroy")},buttons:[]},a);b("<div/>").window(a)},control:function(a,c){b("#control").panel({href:a,cache:!1,method:"post",queryParams:c?c:{},onLoad:function(){},onBeforeLoad:function(){b(this).panel("clear")}})}}})(jQuery);
if($.fn.pagination)$.fn.pagination.defaults.beforePageText="\u7b2c",$.fn.pagination.defaults.afterPageText="\u5171{pages}\u9875",$.fn.pagination.defaults.displayMsg="\u663e\u793a{from}\u5230{to},\u5171{total}\u8bb0\u5f55";if($.fn.datagrid)$.fn.datagrid.defaults.loadMsg="\u6b63\u5728\u5904\u7406\uff0c\u8bf7\u7a0d\u5f85\u3002\u3002\u3002";if($.fn.treegrid&&$.fn.datagrid)$.fn.treegrid.defaults.loadMsg=$.fn.datagrid.defaults.loadMsg;
if($.messager)$.messager.defaults.ok="\u786e\u5b9a",$.messager.defaults.cancel="\u53d6\u6d88";$.map("validatebox,textbox,passwordbox,filebox,searchbox,combo,combobox,combogrid,combotree,datebox,datetimebox,numberbox,spinner,numberspinner,timespinner,datetimespinner".split(","),function(b){if($.fn[b])$.fn[b].defaults.missingMessage="\u8be5\u8f93\u5165\u9879\u4e3a\u5fc5\u8f93\u9879"});
if($.fn.validatebox)$.fn.validatebox.defaults.rules.email.message="\u8bf7\u8f93\u5165\u6709\u6548\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740",$.fn.validatebox.defaults.rules.url.message="\u8bf7\u8f93\u5165\u6709\u6548\u7684URL\u5730\u5740",$.fn.validatebox.defaults.rules.length.message="\u8f93\u5165\u5185\u5bb9\u957f\u5ea6\u5fc5\u987b\u4ecb\u4e8e{0}\u548c{1}\u4e4b\u95f4",$.fn.validatebox.defaults.rules.remote.message="\u8bf7\u4fee\u6b63\u8be5\u5b57\u6bb5";
if($.fn.calendar)$.fn.calendar.defaults.weeks="\u65e5,\u4e00,\u4e8c,\u4e09,\u56db,\u4e94,\u516d".split(","),$.fn.calendar.defaults.months="\u4e00\u6708,\u4e8c\u6708,\u4e09\u6708,\u56db\u6708,\u4e94\u6708,\u516d\u6708,\u4e03\u6708,\u516b\u6708,\u4e5d\u6708,\u5341\u6708,\u5341\u4e00\u6708,\u5341\u4e8c\u6708".split(",");
if($.fn.datebox)$.fn.datebox.defaults.currentText="\u4eca\u5929",$.fn.datebox.defaults.closeText="\u5173\u95ed",$.fn.datebox.defaults.okText="\u786e\u5b9a",$.fn.datebox.defaults.formatter=function(b){var a=b.getFullYear(),c=b.getMonth()+1,b=b.getDate();return a+"-"+(10>c?"0"+c:c)+"-"+(10>b?"0"+b:b)},$.fn.datebox.defaults.parser=function(b){if(!b)return new Date;var a=b.split("-"),b=parseInt(a[0],10),c=parseInt(a[1],10),a=parseInt(a[2],10);return!isNaN(b)&&!isNaN(c)&&!isNaN(a)?new Date(b,c-1,a):new Date};
$.fn.datetimebox&&$.fn.datebox&&$.extend($.fn.datetimebox.defaults,{currentText:$.fn.datebox.defaults.currentText,closeText:$.fn.datebox.defaults.closeText,okText:$.fn.datebox.defaults.okText});if($.fn.datetimespinner)$.fn.datetimespinner.defaults.selections=[[0,4],[5,7],[8,10],[11,13],[14,16],[17,19]];
(function(b){b.extend(b.fn,{validate:function(a){if(this.length){var c=b.data(this[0],"validator");if(c)return c;c=new b.validator(a,this[0]);b.data(this[0],"validator",c);c.settings.onsubmit&&(this.find("input, button").filter(".cancel").click(function(){c.cancelSubmit=!0}),c.settings.submitHandler&&this.find("input, button").filter(":submit").click(function(){c.submitButton=this}),this.submit(function(a){function e(){if(c.settings.submitHandler){if(c.submitButton)var a=b("<input type='hidden'/>").attr("name",
c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm);c.settings.submitHandler.call(c,c.currentForm);c.submitButton&&a.remove();return!1}return!0}c.settings.debug&&a.preventDefault();if(c.cancelSubmit)return c.cancelSubmit=!1,e();if(c.form())return c.pendingRequest?(c.formSubmitted=!0,!1):e();c.focusInvalid();return!1}));return c}a&&a.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")},valid:function(){if(b(this[0]).is("form"))return this.validate().form();
var a=!0,c=b(this[0].form).validate();this.each(function(){a&=c.element(this)});return a},removeAttrs:function(a){var c={},d=this;b.each(a.split(/\s/),function(a,b){c[b]=d.attr(b);d.removeAttr(b)});return c},rules:function(a,c){var d=this[0];if(a){var e=b.data(d.form,"validator").settings,g=e.rules,f=b.validator.staticRules(d);switch(a){case "add":b.extend(f,b.validator.normalizeRule(c));g[d.name]=f;c.messages&&(e.messages[d.name]=b.extend(e.messages[d.name],c.messages));break;case "remove":if(!c)return delete g[d.name],
f;var h={};b.each(c.split(/\s/),function(a,b){h[b]=f[b];delete f[b]});return h}}d=b.validator.normalizeRules(b.extend({},b.validator.metadataRules(d),b.validator.classRules(d),b.validator.attributeRules(d),b.validator.staticRules(d)),d);if(d.required)e=d.required,delete d.required,d=b.extend({required:e},d);return d}});b.extend(b.expr[":"],{blank:function(a){return!b.trim(""+a.value)},filled:function(a){return!!b.trim(""+a.value)},unchecked:function(a){return!a.checked}});b.validator=function(a,c){this.settings=
b.extend(!0,{},b.validator.defaults,a);this.currentForm=c;this.init()};b.validator.format=function(a,c){if(1==arguments.length)return function(){var c=b.makeArray(arguments);c.unshift(a);return b.validator.format.apply(this,c)};2<arguments.length&&c.constructor!=Array&&(c=b.makeArray(arguments).slice(1));c.constructor!=Array&&(c=[c]);b.each(c,function(b,c){a=a.replace(RegExp("\\{"+b+"\\}","g"),c)});return a};b.extend(b.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",
errorElement:"label",focusInvalid:!0,errorContainer:b([]),errorLabelContainer:b([]),onsubmit:!0,ignore:[],ignoreTitle:!1,onfocusin:function(a){this.lastActive=a;this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(a)).hide())},onfocusout:function(a){!this.checkable(a)&&(a.name in this.submitted||!this.optional(a))&&this.element(a)},onkeyup:function(a){(a.name in
this.submitted||a==this.lastElement)&&this.element(a)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(a,c,d){b(a).addClass(c).removeClass(d)},unhighlight:function(a,c,d){b(a).removeClass(c).addClass(d)}},setDefaults:function(a){b.extend(b.validator.defaults,a)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",
date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:b.validator.format("Please enter no more than {0} characters."),minlength:b.validator.format("Please enter at least {0} characters."),rangelength:b.validator.format("Please enter a value between {0} and {1} characters long."),
range:b.validator.format("Please enter a value between {0} and {1}."),max:b.validator.format("Please enter a value less than or equal to {0}."),min:b.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function a(a){var c=b.data(this[0].form,"validator"),a="on"+a.type.replace(/^validate/,"");c.settings[a]&&c.settings[a].call(c,this[0])}this.labelContainer=b(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&
this.labelContainer||b(this.currentForm);this.containers=b(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var c=this.groups={};b.each(this.settings.groups,function(a,d){b.each(d.split(/\s/),function(b,d){c[d]=a})});var d=this.settings.rules;b.each(d,function(a,c){d[a]=b.validator.normalizeRule(c)});b(this.currentForm).validateDelegate(":text, :password, :file, select, textarea",
"focusin focusout keyup",a).validateDelegate(":radio, :checkbox, select, option","click",a);this.settings.invalidHandler&&b(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();b.extend(this.submitted,this.errorMap);this.invalid=b.extend({},this.errorMap);this.valid()||b(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);
return this.valid()},element:function(a){this.lastElement=a=this.clean(a);this.prepareElement(a);this.currentElements=b(a);var c=this.check(a);c?delete this.invalid[a.name]:this.invalid[a.name]=!0;if(!this.numberOfInvalids())this.toHide=this.toHide.add(this.containers);this.showErrors();return c},showErrors:function(a){if(a){b.extend(this.errorMap,a);this.errorList=[];for(var c in a)this.errorList.push({message:a[c],element:this.findByName(c)[0]});this.successList=b.grep(this.successList,function(b){return!(b.name in
a)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){b.fn.resetForm&&b(this.currentForm).resetForm();this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b=0,d;for(d in a)b++;return b},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==
this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{b(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(a){}},findLastActive:function(){var a=this.lastActive;return a&&1==b.grep(this.errorList,function(b){return b.element.name==a.name}).length&&a},elements:function(){var a=this,c={};return b([]).add(this.currentForm.elements).filter(":input").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&
a.settings.debug&&window.console&&console.error("%o has no name assigned",this);return this.name in c||!a.objectLength(b(this).rules())?!1:c[this.name]=!0})},clean:function(a){return b(a)[0]},errors:function(){return b(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=b([]);this.toHide=b([]);this.currentElements=b([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},
prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},check:function(a){a=this.clean(a);this.checkable(a)&&(a=this.findByName(a.name).not(this.settings.ignore)[0]);var c=b(a).rules(),d=!1,e;for(e in c){var g={method:e,parameters:c[e]};try{var f=b.validator.methods[e].call(this,a.value.replace(/\r/g,""),a,g.parameters);if("dependency-mismatch"==f)d=!0;else{d=!1;if("pending"==f){this.toHide=this.toHide.not(this.errorsFor(a));return}if(!f)return this.formatAndAdd(a,g),!1}}catch(h){throw this.settings.debug&&
window.console&&console.log("exception occured when checking element "+a.id+", check the '"+g.method+"' method",h),h;}}if(!d)return this.objectLength(c)&&this.successList.push(a),!0},customMetaMessage:function(a,c){if(b.metadata){var d=this.settings.meta?b(a).metadata()[this.settings.meta]:b(a).metadata();return d&&d.messages&&d.messages[c]}},customMessage:function(a,b){var d=this.settings.messages[a];return d&&(d.constructor==String?d:d[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==
arguments[a])return arguments[a]},defaultMessage:function(a,c){return this.findDefined(this.customMessage(a.name,c),this.customMetaMessage(a,c),!this.settings.ignoreTitle&&a.title||void 0,b.validator.messages[c],"<strong>Warning: No message defined for "+a.name+"</strong>")},formatAndAdd:function(a,b){var d=this.defaultMessage(a,b.method),e=/\$?\{(\d+)\}/g;"function"==typeof d?d=d.call(this,b.parameters,a):e.test(d)&&(d=jQuery.format(d.replace(e,"{$1}"),b.parameters));this.errorList.push({message:d,
element:a});this.errorMap[a.name]=d;this.submitted[a.name]=d},addWrapper:function(a){this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper)));return a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var b=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass);this.showLabel(b.element,b.message)}if(this.errorList.length)this.toShow=this.toShow.add(this.containers);if(this.settings.success)for(a=
0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight){a=0;for(b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,this.settings.validClass)}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return b(this.errorList).map(function(){return this.element})},showLabel:function(a,
c){var d=this.errorsFor(a);d.length?(d.removeClass().addClass(this.settings.errorClass),d.attr("generated")&&d.html(c)):(d=b("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(a),generated:!0}).addClass(this.settings.errorClass).html(c||""),this.settings.wrapper&&(d=d.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(d).length||(this.settings.errorPlacement?this.settings.errorPlacement(d,b(a)):d.insertAfter(a)));!c&&this.settings.success&&(d.text(""),
"string"==typeof this.settings.success?d.addClass(this.settings.success):this.settings.success(d));this.toShow=this.toShow.add(d)},errorsFor:function(a){var c=this.idOrName(a);return this.errors().filter(function(){return b(this).attr("for")==c})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(a){var c=this.currentForm;return b(document.getElementsByName(a)).map(function(b,e){return e.form==
c&&e.name==a&&e||null})},getLength:function(a,c){switch(c.nodeName.toLowerCase()){case "select":return b("option:selected",c).length;case "input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return a.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{"boolean":function(a){return a},string:function(a,c){return!!b(a,c.form).length},"function":function(a,b){return a(b)}},optional:function(a){return!b.validator.methods.required.call(this,
b.trim(a.value),a)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(a,c){this.pendingRequest--;if(0>this.pendingRequest)this.pendingRequest=0;delete this.pending[a.name];if(c&&0==this.pendingRequest&&this.formSubmitted&&this.form())b(this.currentForm).submit(),this.formSubmitted=!1;else if(!c&&0==this.pendingRequest&&this.formSubmitted)b(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=
!1},previousValue:function(a){return b.data(a,"previousValue")||b.data(a,"previousValue",{old:null,valid:!0,message:this.defaultMessage(a,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(a,c){a.constructor==String?this.classRuleSettings[a]=c:b.extend(this.classRuleSettings,a)},classRules:function(a){var c=
{};(a=b(a).attr("class"))&&b.each(a.split(" "),function(){this in b.validator.classRuleSettings&&b.extend(c,b.validator.classRuleSettings[this])});return c},attributeRules:function(a){var c={},a=b(a),d;for(d in b.validator.methods){var e=a.attr(d);e&&(c[d]=e)}c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)&&delete c.maxlength;return c},metadataRules:function(a){if(!b.metadata)return{};var c=b.data(a.form,"validator").settings.meta;return c?b(a).metadata()[c]:b(a).metadata()},staticRules:function(a){var c=
{},d=b.data(a.form,"validator");d.settings.rules&&(c=b.validator.normalizeRule(d.settings.rules[a.name])||{});return c},normalizeRules:function(a,c){b.each(a,function(d,e){if(!1===e)delete a[d];else if(e.param||e.depends){var g=!0;switch(typeof e.depends){case "string":g=!!b(e.depends,c.form).length;break;case "function":g=e.depends.call(c,c)}g?a[d]=void 0!==e.param?e.param:!0:delete a[d]}});b.each(a,function(d,e){a[d]=b.isFunction(e)?e(c):e});b.each(["minlength","maxlength","min","max"],function(){a[this]&&
(a[this]=Number(a[this]))});b.each(["rangelength","range"],function(){a[this]&&(a[this]=[Number(a[this][0]),Number(a[this][1])])});if(b.validator.autoCreateRanges){if(a.min&&a.max)a.range=[a.min,a.max],delete a.min,delete a.max;if(a.minlength&&a.maxlength)a.rangelength=[a.minlength,a.maxlength],delete a.minlength,delete a.maxlength}a.messages&&delete a.messages;return a},normalizeRule:function(a){if("string"==typeof a){var c={};b.each(a.split(/\s/),function(){c[this]=!0});a=c}return a},addMethod:function(a,
c,d){b.validator.methods[a]=c;b.validator.messages[a]=void 0!=d?d:b.validator.messages[a];3>c.length&&b.validator.addClassRules(a,b.validator.normalizeRule(a))},methods:{required:function(a,c,d){if(!this.depend(d,c))return"dependency-mismatch";switch(c.nodeName.toLowerCase()){case "select":return(a=b(c).val())&&0<a.length;case "input":if(this.checkable(c))return 0<this.getLength(a,c);default:return 0<b.trim(a).length}},remote:function(a,c,d){if(this.optional(c))return"dependency-mismatch";var e=this.previousValue(c);
this.settings.messages[c.name]||(this.settings.messages[c.name]={});e.originalMessage=this.settings.messages[c.name].remote;this.settings.messages[c.name].remote=e.message;d="string"==typeof d&&{url:d}||d;if(this.pending[c.name])return"pending";if(e.old===a)return e.valid;e.old=a;var g=this;this.startRequest(c);var f={};f[c.name]=a;b.ajax(b.extend(!0,{url:d,mode:"abort",port:"validate"+c.name,dataType:"json",data:f,success:function(d){g.settings.messages[c.name].remote=e.originalMessage;var f=!0===
d;if(f){var i=g.formSubmitted;g.prepareElement(c);g.formSubmitted=i;g.successList.push(c);g.showErrors()}else i={},d=d||g.defaultMessage(c,"remote"),i[c.name]=e.message=b.isFunction(d)?d(a):d,g.showErrors(i);e.valid=f;g.stopRequest(c,f)}},d));return"pending"},minlength:function(a,c,d){return this.optional(c)||this.getLength(b.trim(a),c)>=d},maxlength:function(a,c,d){return this.optional(c)||this.getLength(b.trim(a),c)<=d},rangelength:function(a,c,d){a=this.getLength(b.trim(a),c);return this.optional(c)||
a>=d[0]&&a<=d[1]},min:function(a,b,d){return this.optional(b)||a>=d},max:function(a,b,d){return this.optional(b)||a<=d},range:function(a,b,d){return this.optional(b)||a>=d[0]&&a<=d[1]},email:function(a,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(a)},
url:function(a,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a))},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9-]+/.test(a))return!1;for(var d=0,e=0,g=!1,a=a.replace(/\D/g,""),f=a.length-1;0<=f;f--){e=
a.charAt(f);e=parseInt(e,10);if(g&&9<(e*=2))e-=9;d+=e;g=!g}return 0==d%10},accept:function(a,b,d){d="string"==typeof d?d.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(b)||a.match(RegExp(".("+d+")$","i"))},equalTo:function(a,c,d){d=b(d).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){b(c).valid()});return a==d.val()}}});b.format=b.validator.format})(jQuery);
(function(b){var a={};if(b.ajaxPrefilter)b.ajaxPrefilter(function(b,c,g){c=b.port;"abort"==b.mode&&(a[c]&&a[c].abort(),a[c]=g)});else{var c=b.ajax;b.ajax=function(d){var e=("port"in d?d:b.ajaxSettings).port;return"abort"==("mode"in d?d:b.ajaxSettings).mode?(a[e]&&a[e].abort(),a[e]=c.apply(this,arguments)):c.apply(this,arguments)}}})(jQuery);
(function(b){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&b.each({focus:"focusin",blur:"focusout"},function(a,c){function d(a){a=b.event.fix(a);a.type=c;return b.event.handle.call(this,a)}b.event.special[c]={setup:function(){this.addEventListener(a,d,!0)},teardown:function(){this.removeEventListener(a,d,!0)},handler:function(a){arguments[0]=b.event.fix(a);arguments[0].type=c;return b.event.handle.apply(this,arguments)}}});b.extend(b.fn,{validateDelegate:function(a,
c,d){return this.bind(c,function(c){var g=b(c.target);if(g.is(a))return d.apply(g,arguments)})}})})(jQuery);
jQuery.extend(jQuery.validator.messages,{required:"\u5fc5\u9009\u5b57\u6bb5",remote:"\u8bf7\u4fee\u6b63\u8be5\u5b57\u6bb5",email:"\u8bf7\u8f93\u5165\u6b63\u786e\u683c\u5f0f\u7684\u7535\u5b50\u90ae\u4ef6",url:"\u8bf7\u8f93\u5165\u5408\u6cd5\u7684\u7f51\u5740",date:"\u8bf7\u8f93\u5165\u5408\u6cd5\u7684\u65e5\u671f",dateISO:"\u8bf7\u8f93\u5165\u5408\u6cd5\u7684\u65e5\u671f (ISO).",number:"\u8bf7\u8f93\u5165\u5408\u6cd5\u7684\u6570\u5b57",digits:"\u53ea\u80fd\u8f93\u5165\u6574\u6570",creditcard:"\u8bf7\u8f93\u5165\u5408\u6cd5\u7684\u4fe1\u7528\u5361\u53f7",
equalTo:"\u8bf7\u518d\u6b21\u8f93\u5165\u76f8\u540c\u7684\u503c",accept:"\u8bf7\u8f93\u5165\u62e5\u6709\u5408\u6cd5\u540e\u7f00\u540d\u7684\u5b57\u7b26\u4e32",maxlength:jQuery.validator.format("\u8bf7\u8f93\u5165\u4e00\u4e2a\u957f\u5ea6\u6700\u591a\u662f {0} \u7684\u5b57\u7b26\u4e32"),minlength:jQuery.validator.format("\u8bf7\u8f93\u5165\u4e00\u4e2a\u957f\u5ea6\u6700\u5c11\u662f {0} \u7684\u5b57\u7b26\u4e32"),rangelength:jQuery.validator.format("\u8bf7\u8f93\u5165\u4e00\u4e2a\u957f\u5ea6\u4ecb\u4e8e {0} \u548c {1} \u4e4b\u95f4\u7684\u5b57\u7b26\u4e32"),
range:jQuery.validator.format("\u8bf7\u8f93\u5165\u4e00\u4e2a\u4ecb\u4e8e {0} \u548c {1} \u4e4b\u95f4\u7684\u503c"),max:jQuery.validator.format("\u8bf7\u8f93\u5165\u4e00\u4e2a\u6700\u5927\u4e3a {0} \u7684\u503c"),min:jQuery.validator.format("\u8bf7\u8f93\u5165\u4e00\u4e2a\u6700\u5c0f\u4e3a {0} \u7684\u503c")});
$.extend($.fn.validatebox.defaults.rules,{CHS:{validator:function(b){return/^[\u0391-\uFFE5]+$/.test(b)},message:"\u8bf7\u8f93\u5165\u6c49\u5b57"},english:{validator:function(b){return/^[A-Za-z]+$/i.test(b)},message:"\u8bf7\u8f93\u5165\u82f1\u6587"},ip:{validator:function(b){return/\d+\.\d+\.\d+\.\d+/.test(b)},message:"IP\u5730\u5740\u683c\u5f0f\u4e0d\u6b63\u786e"},ZIP:{validator:function(b){return/^[0-9]\d{5}$/.test(b)},message:"\u90ae\u653f\u7f16\u7801\u4e0d\u5b58\u5728"},QQ:{validator:function(b){return/^[1-9]\d{4,10}$/.test(b)},
message:"QQ\u53f7\u7801\u4e0d\u6b63\u786e"},mobile:{validator:function(b){return/^(?:13\d|15\d|18\d)-?\d{5}(\d{3}|\*{3})$/.test(b)},message:"\u624b\u673a\u53f7\u7801\u4e0d\u6b63\u786e"},tel:{validator:function(b){return/^(\d{3}-|\d{4}-)?(\d{8}|\d{7})?$/.test(b)},message:"\u7535\u8bdd\u53f7\u7801\u4e0d\u6b63\u786e"},number:{validator:function(b){return/^[0-9]+.?[0-9]*$/.test(b)},message:"\u8bf7\u8f93\u5165\u6570\u5b57"},integer:{validator:function(b){return/^[+]?[1-9]\d*$/.test(b)},message:"\u8bf7\u8f93\u5165\u6574\u6570"},
range:{validator:function(b,a){return/^[1-9]\d*$/.test(b)?b>=a[0]&&b<=a[1]:!1},message:"\u8f93\u5165\u7684\u6570\u5b57\u5728{0}\u5230{1}\u4e4b\u95f4"},minLength:{validator:function(b,a){return b.length>=a[0]},message:"\u81f3\u5c11\u8f93\u5165{0}\u4e2a\u5b57"},maxLength:{validator:function(b,a){return b.length<=a[0]},message:"\u6700\u591a{0}\u4e2a\u5b57"},selectValid:{validator:function(b,a){return b==a[0]?!1:!0},message:"\u8bf7\u9009\u62e9"},loginName:{validator:function(b){return/^[\u0391-\uFFE5\w]+$/.test(b)},
message:"\u767b\u5f55\u540d\u79f0\u53ea\u5141\u8bb8\u6c49\u5b57\u3001\u82f1\u6587\u5b57\u6bcd\u3001\u6570\u5b57\u53ca\u4e0b\u5212\u7ebf\u3002"},equalTo:{validator:function(b,a){return b==$(a[0]).val()},message:"\u4e24\u6b21\u8f93\u5165\u7684\u5b57\u7b26\u4e0d\u4e00\u81f3"}});
$.extend($.fn.treegrid.methods,{cascadeCheck:function(b,a){function c(a,b,d,e,g,f,h){if(b=$(a).treegrid("getParent",b))b=b[d],"del"==h&&!f?(e?$(a).treegrid("select",b):$(a).treegrid("unselect",b),giveActs(b,"del",g+"tree_dnd_no.png")):"add"==h&&!f&&($(a).treegrid("select",b),giveActs(b,"add",g+"tree_dnd_yes.png")),c(a,b,d,e,g,f,h)}function d(a,b,c,e,g,f,h){!g&&e&&$(a).treegrid("expand",b);for(var b=$(a).treegrid("getChildren",b),j=0;j<b.length;j++){var i=b[j][c];g?$(a).treegrid("select",i):$(a).treegrid("unselect",
i);"del"==h?0<$("#hasGive_"+i).attr("src").indexOf("tree_dnd_yes.png")&&($("#hasGive_"+i).attr("src",f+"tree_dnd_no.png"),giveActs(i,"del",f+"tree_dnd_no.png")):($("#hasGive_"+i).attr("src",f+"tree_dnd_yes.png"),giveActs(i,"add",f+"tree_dnd_yes.png"));d(a,i,c,e,g,f,h)}}function e(a,b,c){var d=$(a).treegrid("getParent",b),e=b;d&&(e=d[c]);d=!1;if(e=$(a).treegrid("getChildren",e))for(var f=0;f<e.length;f++){var h=e[f][c];if(h!=b){if(0<$("#hasGive_"+h).attr("src").indexOf("tree_dnd_yes.png"))return!0;
d=g(a,h,c)}}return d}function g(a,b,c){if(b=$(a).treegrid("getChildren",b))for(;0<b.length;)return b=b[0][c],0<$("#hasGive_"+b).attr("src").indexOf("tree_dnd_yes.png")?!0:g(a,b,c);return!1}var f=$.data(b[0],"treegrid").options;if(!f.singleSelect){for(var h=f.idField,k=!1,f=$(b).treegrid("getSelections"),i=0;i<f.length;i++)f[i][h]==a.id&&(k=!0);var f=$("#hasGive_"+a.id).attr("src"),l=a.imgsrc+"tree_dnd_yes.png",j="add";0<f.indexOf("tree_dnd_yes.png")&&(l=a.imgsrc+"tree_dnd_no.png",j="del");"del"==
j?$.messager.confirm("\u786e\u8ba4","\u60a8\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u4e2a\u6743\u9650\u5417</font> \uff1f",function(f){f&&(giveActs(a.id,j,l),f=e(b[0],a.id,h,j),c(b[0],a.id,h,k,a.imgsrc,f,j),d(b[0],a.id,h,a.deepCascade,k,a.imgsrc,j))}):(giveActs(a.id,j,l),f=e(b[0],a.id,h,j),c(b[0],a.id,h,k,a.imgsrc,f,j),d(b[0],a.id,h,a.deepCascade,k,a.imgsrc,j))}}});
